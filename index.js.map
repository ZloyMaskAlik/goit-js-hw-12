{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst PIXABAY_API_KEY = '48326297-b9ec83e241adf6514f2254162';\n// const BASE_URL = 'https://pixabay.com/api/';\n\naxios.defaults.baseURL = `https://pixabay.com/api/`;\n\nexport const fetchImages = (searchedValue, perPage, currentPage) => {\n  const axiosParams = {\n    params:{\n    key: PIXABAY_API_KEY,\n    q: searchedValue,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: currentPage,\n    per_page: perPage,\n  }};\n  return axios.get(`` , axiosParams)\n};","export const createImageTemplate = image => {\n    return `\n    <li class=\"gallery-item js-item-card\">\n       <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n       <img\n         class=\"gallery-image\"\n         src=\"${image.webformatURL}\"\n         data-source=\"${image.largeImageUR}\"\n         alt=\"${image.tags}\"\n        />\n        </a>\n        <div class=\"image-info\">\n                <p class=\"image-info-item\"><b>Likes</b>\n                ${image.likes}\n                </p>\n                <p class=\"image-info-item\">\n                <b>Views</b>\n                ${image.views}\n                </p>\n                <p class=\"image-info-item\">\n                <b>Comments</b>\n                ${image.comments}\n                </p>\n                <p class=\"image-info-item\">\n                <b>Downloads</b>\n                ${image.downloads}\n                </p>\n        </div>\n    </li>\n    `;\n};","import SimpleLightbox from \"simplelightbox\";\nimport iziToast from \"izitoast\";\n\nimport { fetchImages } from \"./js/pixabay-api\";\nimport { createImageTemplate } from \"./js/render-functions\";\n\nlet lightbox = new SimpleLightbox(`.js-images a`, { captionsData: `alt`, captionDelay: 250 });\nlet currentPage = 1;\nconst perPage = 15;\nlet searchedValue = '';\n\nconst searchFormEl = document.querySelector (`.js-search-form`)\nconst galleryImages = document.querySelector(`.js-images`);\nconst loaderIcon = document.querySelector('.loader');\nconst loadButtonEl = document.querySelector('.js-load-more');\n\nconst toggleLoader = () => {\n  loaderIcon.classList.toggle('is-hidden');\n};\n\nconst hideLoadButton = () => {\n  loadButtonEl.classList.add('is-hidden');\n};\n\nconst showLoadButton = () => {\n  loadButtonEl.classList.remove('is-hidden');\n};\n\nconst smoothScrollByHeight = () => {\n  const galleryCard = document.querySelector('.js-images .js-item-card');\n  if (galleryCard) {\n    const cardHeight = galleryCard.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2.3,\n      behavior: 'smooth',\n    });\n  }\n};\n\nconst onSearchFormSubmit = async event => {\n  try {\n    event.preventDefault();\n    searchedValue = event.currentTarget.elements.query.value.trim();\n    if (searchedValue === ``) {\n      iziToast.info({\n        message:\n          'Sorry, field must be filled in. Please try again!',\n        position: 'topRight',\n        messageSize: '16',\n        messageColor: 'rgba(255,255,255, 1)',\n        backgroundColor: `rgba(51,109,255, 1)`,\n      });\n        return;\n    }\n\n    galleryImages.innerHTML = '';\n    toggleLoader();\n    hideLoadButton();\n    currentPage = 1;\n \n    const { data } = await fetchImages(searchedValue,perPage, currentPage);\n       \n    if (data.hits.length === 0) {\n      iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          backgroundColor: `rgba(255,107,10, 1)`,\n          messageSize: '16',\n          messageColor: 'rgba(255,255,255, 1)',\n          position: 'topRight',\n         });\n      toggleLoader();\n      searchFormEl.reset()\n      return;\n    }\n    \n        const createTemplate = data.hits.map( item => createImageTemplate(item)).join(``);\n        galleryImages.innerHTML = createTemplate;\n        \n    if (data.totalHits > 15) {\n      showLoadButton();\n      loadButtonEl.addEventListener('click', onLoadButtonClick);\n    }\n    \n        lightbox.refresh();\n        searchFormEl.reset()\n       \n    \n  } catch (err) {\n   \n      console.log(error);\n      iziToast.error({\n        message: `${error}`,\n        position: 'topRight',\n      });\n     toggleLoader();\n    }\n  \n  toggleLoader();\n}\n\nconst onLoadButtonClick = async () => {\n  try {\n    currentPage ++;\n    hideLoadButton();\n    toggleLoader();\n\n    const { data } = await fetchImages(searchedValue, perPage, currentPage);\n   \n    const createTemplate = data.hits.map(item => createImageTemplate(item)).join('');\n\n    galleryImages.insertAdjacentHTML('beforeend', createTemplate);\n\n    smoothScrollByHeight();\n    lightbox.refresh();\n\n    const totalPages = Math.ceil(data.totalHits / perPage);\n    if (currentPage < totalPages) {\n      showLoadButton();\n    } else {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        messageSize: '16',\n        messageColor: 'rgba(255,255,255, 1)',\n        backgroundColor: `rgba(51,109,255, 1)`,\n      });\n    }\n  } catch (error) {\n    console.log(error);\n    showError(`${error}`);\n  } finally {\n    toggleLoader();\n  }\n};\n\nsearchFormEl.addEventListener(`submit`, onSearchFormSubmit);\n\n\n"],"names":["PIXABAY_API_KEY","axios","fetchImages","searchedValue","perPage","currentPage","axiosParams","createImageTemplate","image","lightbox","SimpleLightbox","searchFormEl","galleryImages","loaderIcon","loadButtonEl","toggleLoader","hideLoadButton","showLoadButton","smoothScrollByHeight","galleryCard","cardHeight","onSearchFormSubmit","event","iziToast","data","createTemplate","item","onLoadButtonClick","totalPages","error"],"mappings":"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"}